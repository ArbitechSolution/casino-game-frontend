{"ast":null,"code":"import _classCallCheck from \"/Users/imac/Downloads/Crash.BTC.Updated.V2.DEV/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/imac/Downloads/Crash.BTC.Updated.V2.DEV/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/imac/Downloads/Crash.BTC.Updated.V2.DEV/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/imac/Downloads/Crash.BTC.Updated.V2.DEV/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport React from 'react';\nimport * as Cookies from \"js-cookie\";\nimport { __, wait, decode, encode, getUID, sendNotfication, forceSatoshiFormat, Event } from \"../../../../Helper\";\nimport storage from \"../../../../Storage\";\nimport socket from \"../../../../Socket\";\nimport C from \"../../../../Constant\";\n\nvar Index = /*#__PURE__*/function (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  var _super = _createSuper(Index);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _super.call(this, props);\n    _this._isMounted = false;\n\n    _this.tipUpdate = function (data) {\n      if (_this._isMounted) {\n        var _this$state = _this.state,\n            token = _this$state.token,\n            uid = _this$state.uid;\n        var coin = data.coin,\n            senderName = data.senderName,\n            amount = data.amount,\n            target = data.target;\n\n        if (parseInt(target) === parseInt(uid)) {\n          var message = \"You Received \" + forceSatoshiFormat(amount, coin) + \" \" + coin + \" by \" + senderName;\n          sendNotfication(message, 'success', 'top-right');\n        }\n\n        wait(1500).then(function () {\n          if (token !== null) socket.emit(C.CREDIT, encode({\n            token: token,\n            coin: coin\n          }));\n        });\n      }\n    };\n\n    _this.paymentUpdate = function (data) {\n      if (_this._isMounted) {\n        var _this$state2 = _this.state,\n            token = _this$state2.token,\n            uid = _this$state2.uid;\n\n        if (uid !== null) {\n          if (parseFloat(data.uid) === parseFloat(uid)) {\n            sendNotfication(data.message, 'success', 'top-right');\n            Event.emit('update_payment');\n          }\n        }\n\n        wait(1000).then(function () {\n          if (token !== null) socket.emit(C.CREDIT, encode({\n            token: token,\n            coin: data.coin\n          }));\n        });\n      }\n    };\n\n    _this.messageUpdate = function (data) {\n      if (_this._isMounted) {\n        var myUid = parseFloat(_this.state.uid);\n\n        if (parseFloat(data.uid) === myUid || parseFloat(data.target) === myUid) {\n          if (data.from_name !== _this.state.name) {\n            sendNotfication(\"You Have a unread message from \" + data.from_name, 'info', 'top-right');\n          }\n        }\n      }\n    };\n\n    _this.state = {\n      name: storage.getKey('name') ? storage.getKey('name') : null,\n      token: storage.getKey('token') ? storage.getKey('token') : null,\n      uid: getUID\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      this._isMounted = true;\n      socket.on(C.SEND_TIP, function (data) {\n        return _this2.tipUpdate(decode(data));\n      });\n      socket.on(C.UPDATE_PAYMENT_STATUS, function (data) {\n        return _this2.paymentUpdate(decode(data));\n      });\n      socket.on(C.ADD_MESSAGES, function (data) {\n        return _this2.messageUpdate(decode(data));\n      });\n      socket.on('admin_notify', function (data) {\n        return _this2.adminNotify(decode(data));\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"adminNotify\",\n    value: function adminNotify(data) {\n      if (this._isMounted) {\n        sendNotfication(data.mesage, 'danger', 'top-center');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport default Index;","map":{"version":3,"names":["React","Cookies","__","wait","decode","encode","getUID","sendNotfication","forceSatoshiFormat","Event","storage","socket","C","Index","props","_isMounted","tipUpdate","data","state","token","uid","coin","senderName","amount","target","parseInt","message","then","emit","CREDIT","paymentUpdate","parseFloat","messageUpdate","myUid","from_name","name","getKey","on","SEND_TIP","UPDATE_PAYMENT_STATUS","ADD_MESSAGES","adminNotify","mesage","Component"],"sources":["/Users/imac/Downloads/Crash.BTC.Updated.V2.DEV/Frontend/src/App/Pages/Parts/RealTime/index.js"],"sourcesContent":["import React from 'react'\r\nimport * as Cookies from \"js-cookie\";\r\nimport {__, wait, decode, encode, getUID, sendNotfication, forceSatoshiFormat, Event} from \"../../../../Helper\";\r\nimport storage from \"../../../../Storage\";\r\nimport socket from \"../../../../Socket\";\r\nimport C from \"../../../../Constant\";\r\n\r\nclass Index extends React.Component {\r\n    _isMounted = false;\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            name: storage.getKey('name') ? storage.getKey('name') : null,\r\n            token: storage.getKey('token') ? storage.getKey('token') : null,\r\n            uid: getUID\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        this._isMounted = true;\r\n        socket.on(C.SEND_TIP, (data) => this.tipUpdate(decode(data)));\r\n        socket.on(C.UPDATE_PAYMENT_STATUS, (data) => this.paymentUpdate(decode(data)));\r\n        socket.on(C.ADD_MESSAGES, data => this.messageUpdate(decode(data)));\r\n        socket.on('admin_notify', data => this.adminNotify(decode(data)));\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this._isMounted = false;\r\n    }\r\n\r\n    adminNotify(data){\r\n        if(this._isMounted)\r\n        {\r\n            sendNotfication(data.mesage, 'danger', 'top-center');\r\n        }\r\n    }\r\n\r\n    tipUpdate = (data) => {\r\n        if(this._isMounted)\r\n        {\r\n            let { token, uid } = this.state;\r\n            let { coin, senderName, amount, target } = data;\r\n\r\n            if(parseInt(target) === parseInt(uid))\r\n            {\r\n                let message = \"You Received \" + forceSatoshiFormat(amount, coin) + \" \" + coin + \" by \" + senderName;\r\n                sendNotfication(message, 'success', 'top-right');\r\n            }\r\n\r\n            wait(1500).then(() => {\r\n                if(token !== null)\r\n                    socket.emit(C.CREDIT, encode({ token: token, coin: coin }));\r\n            })\r\n        }\r\n    };\r\n\r\n    paymentUpdate = (data) => {\r\n        if(this._isMounted)\r\n        {\r\n            let { token, uid } = this.state;\r\n\r\n            if(uid !== null)\r\n            {\r\n                if(parseFloat(data.uid) === parseFloat(uid))\r\n                {\r\n                    sendNotfication(data.message, 'success', 'top-right');\r\n                    Event.emit('update_payment');\r\n                }\r\n            }\r\n\r\n            wait(1000).then(() => {\r\n                if(token !== null)\r\n                    socket.emit(C.CREDIT, encode({ token: token, coin: data.coin }));\r\n            })\r\n        }\r\n    };\r\n\r\n    messageUpdate = (data) => {\r\n        if(this._isMounted)\r\n        {\r\n            const myUid = parseFloat(this.state.uid);\r\n            if(parseFloat(data.uid ) ===  myUid || parseFloat(data.target) === myUid){\r\n                if(data.from_name !== this.state.name){\r\n                    sendNotfication(\"You Have a unread message from \" + data.from_name, 'info', 'top-right');\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    render(){\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default Index;"],"mappings":"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"},"metadata":{},"sourceType":"module"}